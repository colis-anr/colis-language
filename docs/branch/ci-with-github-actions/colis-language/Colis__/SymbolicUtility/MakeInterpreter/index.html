<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>MakeInterpreter (colis-language.Colis__.SymbolicUtility.MakeInterpreter)</title><link rel="stylesheet" href="../../../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 1.5.2"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> – <a href="../../../index.html">colis-language</a> &#x00BB; <a href="../../index.html">Colis__</a> &#x00BB; <a href="../index.html">SymbolicUtility</a> &#x00BB; MakeInterpreter</nav><h1>Module <code>SymbolicUtility.MakeInterpreter</code></h1><nav class="toc"><ul><li><a href="#interpreter-state">Interpreter state</a></li><li><a href="#utilities">Utilities</a><ul><li><a href="#basic-utilities-and-behaviours">Basic utilities and behaviours</a></li><li><a href="#registration-and-dispatch">Registration and dispatch</a></li></ul></li><li><a href="#interpretation">Interpretation</a></li></ul></nav></header><h3 class="heading">Parameters</h3><ul><li><code><a href="argument-1-Filesystem/index.html">Filesystem</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></li></ul><h3 class="heading">Signature</h3><dl><dt class="spec type" id="type-filesystem"><a href="#type-filesystem" class="anchor"></a><code><span class="keyword">type</span> filesystem</code><code> = <a href="argument-1-Filesystem/index.html#type-filesystem">Filesystem.filesystem</a></code></dt></dl><section><header><h4 id="interpreter-state"><a href="#interpreter-state" class="anchor"></a>Interpreter state</h4></header><dl><dt class="spec type" id="type-state"><a href="#type-state" class="anchor"></a><code><span class="keyword">type</span> state</code><code> = </code><code>{</code><table class="record"><tr id="type-state.filesystem" class="anchored"><td class="def field"><a href="#type-state.filesystem" class="anchor"></a><code>filesystem : <a href="index.html#type-filesystem">filesystem</a>;</code></td></tr><tr id="type-state.stdin" class="anchored"><td class="def field"><a href="#type-state.stdin" class="anchor"></a><code>stdin : <a href="../../../Colis__Semantics__Buffers/Stdin/index.html#type-t">Colis__.Semantics__Buffers.Stdin.t</a>;</code></td></tr><tr id="type-state.stdout" class="anchored"><td class="def field"><a href="#type-state.stdout" class="anchor"></a><code>stdout : <a href="../../../Colis__Semantics__Buffers/Stdout/index.html#type-t">Colis__.Semantics__Buffers.Stdout.t</a>;</code></td></tr><tr id="type-state.log" class="anchored"><td class="def field"><a href="#type-state.log" class="anchor"></a><code>log : <a href="../../../Colis__Semantics__Buffers/Stdout/index.html#type-t">Colis__.Semantics__Buffers.Stdout.t</a>;</code></td></tr></table><code>}</code></dt></dl><dl><dt class="spec value" id="val-mk_state"><a href="#val-mk_state" class="anchor"></a><code><span class="keyword">val</span> mk_state : <a href="index.html#type-filesystem">filesystem</a> <span>&#45;&gt;</span> <a href="index.html#type-state">state</a></code></dt><dd><p>Shortcut to make a state with empty stdin, stdout, and log</p></dd></dl><dl><dt class="spec value" id="val-print_stdout"><a href="#val-print_stdout" class="anchor"></a><code><span class="keyword">val</span> print_stdout : <span>newline:bool</span> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <a href="index.html#type-state">state</a> <span>&#45;&gt;</span> <a href="index.html#type-state">state</a></code></dt><dd><p>Print to stdout (and log)</p></dd></dl><dl><dt class="spec value" id="val-print_error"><a href="#val-print_error" class="anchor"></a><code><span class="keyword">val</span> print_error : string <span>&#45;&gt;</span> <a href="index.html#type-state">state</a> <span>&#45;&gt;</span> <a href="index.html#type-state">state</a></code></dt><dd><p>Print message as utility trace to log if it is not empty (marked as <code>ERR</code>)</p></dd></dl><dl><dt class="spec value" id="val-print_utility_trace"><a href="#val-print_utility_trace" class="anchor"></a><code><span class="keyword">val</span> print_utility_trace : string <span>&#45;&gt;</span> <a href="index.html#type-state">state</a> <span>&#45;&gt;</span> <a href="index.html#type-state">state</a></code></dt><dd><p>Print message as utility trace to log if it is not empty (marked as <code>UTL</code>)</p></dd></dl><dl><dt class="spec value" id="val-print_incomplete_trace"><a href="#val-print_incomplete_trace" class="anchor"></a><code><span class="keyword">val</span> print_incomplete_trace : string <span>&#45;&gt;</span> <a href="index.html#type-state">state</a> <span>&#45;&gt;</span> <a href="index.html#type-state">state</a></code></dt><dd><p>Print message as utility trace to log if it is not empty (marked as <code>INCOMPLETE</code>)</p></dd></dl></section><section><header><h4 id="utilities"><a href="#utilities" class="anchor"></a>Utilities</h4></header><dl><dt class="spec type" id="type-utility"><a href="#type-utility" class="anchor"></a><code><span class="keyword">type</span> utility</code><code> = <a href="index.html#type-state">state</a> <span>&#45;&gt;</span> <span><span>(<a href="index.html#type-state">state</a> * <span>bool <a href="../../Semantics__Result/index.html#type-result">Colis__.Semantics__Result.result</a></span>)</span> list</span></code></dt><dd><p>A utility transforms a symbolic state into a list of symbolic states with boolean results</p></dd></dl><section><header><h5 id="basic-utilities-and-behaviours"><a href="#basic-utilities-and-behaviours" class="anchor"></a>Basic utilities and behaviours</h5><p>The symbolic interpretation of a utility call may result in different behaviours:</p><pre><code class="ml">Any behaviour
  ├─ Known behaviour
  │  ├─ The call was interpreted
  │  │  ├─ [success]: The call was valid and succeeded (i.e. exit 0, i.e. Ok true)
  │  │  └─ [error]: The call failed (i.e. exit &gt;0, i.e. Ok false)
  │  └─ [incomplete]: The utility or option has not been implemented (i.e. Incomplete)
  └─ [unknown]: We don't even know if this call is an error or incomplete behaviour</code></pre><p><code>return true</code> can be used for a simple <code>success</code>. <code>error</code> adds logging to <code>return
      false</code>.</p><p>A call is valid if it corresponds to the syntax of the utility.</p><p>The actual behaviour of <code>unknown</code> in the interpreter is determined by option <code>Option.unknown_behaviour</code> and may be an OCaml exception, or correspond to error behaviour, or incomplete behaviour.</p></header><dl><dt class="spec value" id="val-error"><a href="#val-error" class="anchor"></a><code><span class="keyword">val</span> error : <span>utility:string</span> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <a href="index.html#type-utility">utility</a></code></dt><dd><p>Error utility</p></dd></dl><dl><dt class="spec value" id="val-incomplete"><a href="#val-incomplete" class="anchor"></a><code><span class="keyword">val</span> incomplete : <span>utility:string</span> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <a href="index.html#type-utility">utility</a></code></dt><dd><p>Unsupported stuff in a known utility.</p></dd></dl><dl><dt class="spec value" id="val-unknown"><a href="#val-unknown" class="anchor"></a><code><span class="keyword">val</span> unknown : <span>utility:string</span> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <a href="index.html#type-utility">utility</a></code></dt><dd><p>Unknown-unknown behaviour *</p></dd></dl></section><section><header><h5 id="registration-and-dispatch"><a href="#registration-and-dispatch" class="anchor"></a>Registration and dispatch</h5></header><dl><dt class="spec module-type" id="module-type-SYMBOLIC_UTILITY"><a href="#module-type-SYMBOLIC_UTILITY" class="anchor"></a><code><span class="keyword">module</span> <span class="keyword">type</span> <a href="module-type-SYMBOLIC_UTILITY/index.html">SYMBOLIC_UTILITY</a> = <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>A symbolic utility is comprised of a name and a function that interpretes a <code>utility</code> in a <code>context</code>.</p></dd></dl><dl><dt class="spec value" id="val-register"><a href="#val-register" class="anchor"></a><code><span class="keyword">val</span> register : <span>(<span class="keyword">module</span> <a href="module-type-SYMBOLIC_UTILITY/index.html">SYMBOLIC_UTILITY</a>)</span> <span>&#45;&gt;</span> unit</code></dt><dd><p>Register a symbolic utility</p></dd></dl><dl><dt class="spec value" id="val-is_registered"><a href="#val-is_registered" class="anchor"></a><code><span class="keyword">val</span> is_registered : <span>name:string</span> <span>&#45;&gt;</span> bool</code></dt><dd><p>Check if a utility with <code>name</code> is registered</p></dd></dl><dl><dt class="spec value" id="val-dispatch"><a href="#val-dispatch" class="anchor"></a><code><span class="keyword">val</span> dispatch : <span>name:string</span> <span>&#45;&gt;</span> <a href="../../Semantics__UtilityContext/index.html#type-utility_context">Colis__.Semantics__UtilityContext.utility_context</a> <span>&#45;&gt;</span> <a href="index.html#type-utility">utility</a></code></dt><dd><p>Dispatch a call to utility <code>name</code> in a utility context</p></dd></dl><dl><dt class="spec value" id="val-call"><a href="#val-call" class="anchor"></a><code><span class="keyword">val</span> call : string <span>&#45;&gt;</span> <a href="../../Semantics__UtilityContext/index.html#type-utility_context">Colis__.Semantics__UtilityContext.utility_context</a> <span>&#45;&gt;</span> <span>string list</span> <span>&#45;&gt;</span> <a href="index.html#type-utility">utility</a></code></dt><dd><p>A saner way to call <code>dispatch</code> (e.g. in the implementation of utilities)</p></dd></dl></section></section><section><header><h4 id="interpretation"><a href="#interpretation" class="anchor"></a>Interpretation</h4></header><dl><dt class="spec type" id="type-sym_state"><a href="#type-sym_state" class="anchor"></a><code><span class="keyword">type</span> sym_state</code><code> = </code><code>{</code><table class="record"><tr id="type-sym_state.context" class="anchored"><td class="def field"><a href="#type-sym_state.context" class="anchor"></a><code>context : <a href="../../Semantics__Context/index.html#type-context">Colis__.Semantics__Context.context</a>;</code></td></tr><tr id="type-sym_state.state" class="anchored"><td class="def field"><a href="#type-sym_state.state" class="anchor"></a><code>state : <a href="index.html#type-state">state</a>;</code></td></tr></table><code>}</code></dt><dd><p>A symbolic state combines a state with a concrete interpreter context</p></dd></dl><dl><dt class="spec value" id="val-interp_program"><a href="#val-interp_program" class="anchor"></a><code><span class="keyword">val</span> interp_program : <a href="../../Semantics__Input/index.html#type-input">Colis__.Semantics__Input.input</a> <span>&#45;&gt;</span> <span><a href="index.html#type-sym_state">sym_state</a> list</span> <span>&#45;&gt;</span> <a href="../../Syntax__Syntax/index.html#type-program">Colis__.Syntax__Syntax.program</a> <span>&#45;&gt;</span> <span><a href="index.html#type-state">state</a> list</span> * <span><a href="index.html#type-state">state</a> list</span> * <span><a href="index.html#type-state">state</a> list</span></code></dt><dd><p><code>interp_program inp stas p</code> symbolic interpretation configured by <code>inp</code> of a program <code>p</code> in a list of symbolic input states <code>stas</code>. Returns the symbolic states representing successful, errorneous, and incomplete interpretation.</p></dd></dl></section></div></body></html>